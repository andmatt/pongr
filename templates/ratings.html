{% extends "layout.html" %}
{% block content %}
<html>
<head>


</head>

<link rel="stylesheet" media="screen" href = "{{ url_for('static', filename='css/custom.css') }}">
<link  rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.7/css/jquery.dataTables.css">
<link  rel="stylesheet" type="text/css" href = "//cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.css">

<script type="text/javascript" language="javascript" src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<script type="text/javascript" language = "javascript" src = "//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script type="text/javascript" language="javascript" src="//cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" language = "javascript" src = "//cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.js"></script>
<script type="text/javascript" language = "javascript" src = "//code.highcharts.com/highcharts.js"></script>






<br>
<body>
<div class="span7 text-center">
    <form action="/recalculate" method="post">
      <button type="submit" class="btn btn-info">
        <span class="glyphicon glyphicon-random" aria-hidden="true">
        </span>
          Refresh Ratings
        </button>
    </form>
  </div>



  <div class="row">
    <div id="my-chart" class="border col-md-7">
      {% if dist != None %}
    <img src="data:image/svg+xml;base64,{{ dist }}" class="img-responsive" \>
    {% endif %}

  </div>
  <div class="border col-md-5">
    {% if matrix != None %}
    <img src="data:image/svg+xml;base64,{{ matrix }}" class="img-responsive" \>
    {% endif %}
</div>

  </div>
<br>

<h3>Singles</h3>

<div>
  <table class = 'display' width="90%" id='fine' align='center'>

  			<thead>
  				<tr>
            <th> First </th>
            <th> Last </th>
  					<th> Rating (&mu;) </th>
  					<th> &sigma; </th>
  					<th> TrueSkill (&mu;-3&sigma;)</th>


  				</tr>
  			</thead>
  			<tbody>
  				{% for item in singles_ratings %}
  				<tr>
            <td> {{item['first_name']}}  </td>
            <td> {{item['last_name']}}  </td>
            <td> {{item['rating']}}  </td>
  					<td> {{item['sigma']}}  </td>
  					<td> {{item['trueskill']}}  </td>

  				</tr>
  				{% endfor %}
  			</tbody>
  		</table>

</div>
<br>

<h3>Doubles</h3>

<div>
  <table class = 'display' width="90%" id='fine' align='center'>

  			<thead>
  				<tr>
            <th> First </th>
            <th> Last </th>
  					<th> Rating (&mu;) </th>
  					<th> &sigma; </th>
  					<th> TrueSkill (&mu;-3&sigma;)</th>


  				</tr>
  			</thead>
  			<tbody>
  				{% for item in doubles_ratings %}
  				<tr>
            <td> {{item['first_name']}}  </td>
            <td> {{item['last_name']}}  </td>
            <td> {{item['rating']}}  </td>
  					<td> {{item['sigma']}}  </td>
  					<td> {{item['trueskill']}}  </td>

  				</tr>
  				{% endfor %}
  			</tbody>
  		</table>

</div>



</body>




<script type="text/javascript">

$(document).ready( function () {
    $('table.display').DataTable({
      "paging":false,
      "info":false,
      "order":[[4, "desc"]]
    });
} );

</script>
</html>
{% endblock %}
